@use "sass:color";
/* Importar variables */
@use 'variables' as *;

/* Clases para formularios estilo iOS */
.form-container {
  background-color: white;
  border-radius: $border-radius;
  padding: 20px;
  max-width: 600px;
  margin: 0 auto;
}

.form-title {
  font-size: $font-size-large !important;
  font-weight: 600;
  color: $text-color-dark;
  margin-bottom: $spacing-sm;
  text-align: center;
}

.form-subtitle {
  color: $text-color-light;
  text-align: center;
  margin-bottom: $spacing-sm;
  font-size: $font-size-small;
}

.form-group {
  margin-bottom: $spacing-md;
}

.form-flex-row {
  display: flex;
  gap: $spacing-sm;
  margin-bottom: $spacing-md;
  flex-direction: row !important;
}

.form-flex-col {
  flex: 1;
  min-width: 0; /* Evita que el contenido desborde */
}

/* Keyframes para la animación del spinner */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Angular Material Form Field customization */
.mat-mdc-form-field {
  font-family: $font-family !important;
  margin-bottom: $spacing-md;
  width: 100% !important;
  
  .mat-mdc-floating-label {
    top: 50% !important;
    transform: translateY(-50%) !important;
    pointer-events: none !important;
  }
  
  &.mat-mdc-form-field-has-icon {
    .mat-mdc-text-field-wrapper {
      position: relative !important;
    }
    
    .mat-mdc-form-field-icon-prefix {
      position: absolute !important;
      left: 12px !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      z-index: 1 !important;
    }
    
    .mat-mdc-form-field-infix {
      padding-left: 36px !important;
    }
  }
  
  .mat-mdc-form-field-label-wrapper {
    height: 100% !important;
    top: 0 !important;
    padding: 0 !important;
  }
  
  .mat-mdc-floating-label.mdc-floating-label {
    color: $text-color-light !important;
    font-size: $font-size-normal !important;
  }
  
  &.mat-focused .mat-mdc-floating-label.mdc-floating-label {
    color: $primary-color !important;
    opacity: 1 !important;
    transform: translateY(-100%) scale(0.75) !important;
  }
  
  .mat-mdc-form-field-label {
    transform-origin: left top !important;
    transition: transform 0.2s ease, color 0.2s ease !important;
  }
  
  &.mat-mdc-form-field-has-value .mat-mdc-form-field-label {
    display: block !important;
    transform: translateY(-100%) scale(0.75) !important;
  }
  
  .mat-icon {
    color: $text-color-light !important;
    font-size: 18px !important;
    width: 18px !important;
    height: 18px !important;
  }
  
  &.mat-focused .mat-icon {
    color: $primary-color !important;
  }
}

/* Estilo para select y datepicker */
.mat-select-value,
.mat-select-arrow,
.mat-datepicker-toggle {
  color: $text-color-dark !important;
}

.mat-datepicker-toggle {
  color: #666 !important;
}

.mat-form-field-appearance-outline .mat-form-field-outline {
  color: rgba($text-color-light, 0.3) !important; 
}

.mat-form-field-label {
  color: $text-color-light !important;
  font-weight: 500 !important;
}

.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick {
  color: $primary-color !important;
}

.mat-form-field.mat-focused .mat-form-field-label {
  color: $primary-color !important;
}

.mat-form-field.mat-form-field-invalid .mat-form-field-label {
  color: $error-color !important;
}

/* iOS estilo para todos los form fields */
.ios-input {
  margin-bottom: $spacing-md;
  
  .mat-mdc-form-field-flex {
    background-color: rgba($background-color, 0.7) !important;
    border-radius: $border-radius-small !important;
    padding: 0 $spacing-md !important;
    height: 44px !important;
    border: 1px solid rgba($text-color-light, 0.3) !important;
    transition: all 0.2s ease;
  }
  
  &:hover .mat-mdc-form-field-flex {
    border-color: rgba($text-color-light, 0.5) !important;
  }
  
  &.mat-focused .mat-mdc-form-field-flex {
    border-color: $primary-color !important;
    box-shadow: 0 0 0 2px rgba($primary-color, 0.2) !important;
  }
  
  // Eliminar el outline notched
  .mdc-notched-outline {
    display: none !important;
  }
}

/* Estilos para formularios del perfil y empresa */
.personal-form-container,
.company-form-container {
  height: auto !important;
  min-height: auto !important;
  max-height: calc(100vh - 220px) !important;
  padding: 20px !important;
  border-radius: $border-radius !important;
  background-color: white !important;
  width: 100% !important;
  box-sizing: border-box !important;
  margin: 0 auto !important;
  overflow: visible !important;
  transform: none !important;
  position: static !important;
  display: flex !important;
  flex-direction: column !important;
}

.header-section {
  margin-bottom: $spacing-sm !important;
  text-align: center !important;
}

.form-fields {
  display: flex !important;
  flex-direction: column !important;
  width: 100% !important;
  margin-bottom: $spacing-sm !important;
  flex: 1 !important;
  overflow: visible !important;
}

/* Botones de acción */
.form-actions {
  margin-top: $spacing-md !important;
  margin-bottom: $spacing-sm !important;
}

.btn-primary {
  background-color: $primary-color !important;
  color: white !important;
  border: none !important;
  padding: $spacing-sm $spacing-md !important;
  border-radius: $border-radius-button !important;
  cursor: pointer !important;
  font-weight: 500 !important;
  transition: background-color 0.3s ease !important;
  height: 44px !important;
  width: 100% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  
  &:hover {
    background-color: color.adjust($primary-color, $lightness: -5%) !important;
  }
  
  &:disabled {
    background-color: color.adjust($primary-color, $lightness: 25%) !important;
    cursor: not-allowed !important;
  }
}

.full-width {
  width: 100% !important;
}

.spinner-in-button {
  margin-right: $spacing-xs !important;
  display: inline-block !important;
}

/* Custom field styles */
.custom-field {
  margin-bottom: 16px !important;
}

/* Profile image */
.profile-image {
  width: 70px !important;
  height: 70px !important;
  border-radius: 35px !important;
  overflow: hidden !important;
  background-color: rgba($background-color, 0.7) !important;
  border: 1px solid rgba($text-color-light, 0.3) !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}

/* Estilo para checkbox alineado con texto */
.remember-forgot-container {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: $spacing-md;
}

.remember-me {
  margin: 0;
  display: flex;
  align-items: flex-start;
  min-height: 24px;
}

.forgot-password {
  margin: 0;
  padding-top: 2px;
}

/* Errores más destacados */
.mat-error {
  color: $error-color !important;
  font-size: 11px !important;
  font-weight: 400 !important;
  line-height: 1.2 !important;
  margin-top: 2px !important;
  margin-bottom: 0 !important;
}

/* Mejorar placeholders */
::placeholder {
  color: $text-color-light !important;
  opacity: 1 !important;
  font-weight: 400 !important;
}

/* Override para Material Design Componentes */
:host ::ng-deep {
  // iOS style form fields
  .mat-mdc-form-field-appearance-outline {
    .mdc-notched-outline__leading,
    .mdc-notched-outline__notch,
    .mdc-notched-outline__trailing {
      border-color: rgba($text-color-light, 0.3) !important;
      border-width: 1px !important;
      background-color: rgba($background-color, 0.7) !important;
    }
    
    .mat-mdc-form-field-flex {
      background-color: rgba($background-color, 0.7) !important;
      border-radius: $border-radius-small !important;
      padding: 0 $spacing-md !important;
      height: 44px !important;
      border: 1px solid rgba($text-color-light, 0.3) !important;
    }
    
    &.mat-focused .mat-mdc-form-field-flex {
      border-color: $primary-color !important;
      box-shadow: 0 0 0 2px rgba($primary-color, 0.2) !important;
    }
    
    // Eliminate background and notch
    .mdc-notched-outline {
      display: none !important;
    }
  }
  
  .mat-mdc-form-field {
    width: 100% !important;
    
    .mat-mdc-floating-label {
      top: 50% !important;
      transform: translateY(-50%) !important;
    }
    
    .mat-mdc-form-field-label-wrapper {
      height: 100% !important;
      top: 0 !important;
      padding: 0 !important;
    }
    
    .mat-mdc-floating-label.mdc-floating-label {
      color: $text-color-light !important;
      font-size: $font-size-normal !important;
    }
    
    &.mat-focused .mat-mdc-floating-label.mdc-floating-label {
      color: $primary-color !important;
    }
  }
  
  .mat-mdc-text-field-wrapper {
    background-color: transparent !important;
    padding: 0 !important;
  }
  
  .mat-mdc-form-field-infix {
    padding-top: $spacing-sm !important;
    padding-bottom: $spacing-sm !important;
    min-height: auto !important;
  }
  
  .mat-mdc-input-element {
    color: $text-color-dark !important;
    font-weight: 400 !important;
    font-size: $font-size-normal !important;
    caret-color: $primary-color !important;
  }
}

/* Override para checkboxes */
:host ::ng-deep, ::ng-deep {
  .mat-mdc-checkbox {
    margin-right: 8px !important;
  }
  
  .mat-mdc-checkbox .mdc-form-field {
    align-items: flex-start !important;
  }
  
  .mat-mdc-checkbox .mdc-form-field > label {
    margin-top: -2px !important;
    font-size: 13px !important;
    line-height: 1.4 !important;
  }
  
  /* Arreglo para mensajes de error con menor espaciado */
  .mat-mdc-form-field-subscript-wrapper {
    position: static !important;
    height: auto !important;
    padding: 0 !important;
    margin: 0 !important;
    display: block !important;
    margin-top: 2px !important;
  }

  .mat-mdc-form-field-error-wrapper {
    position: static !important;
    padding: 0 !important;
  }

  .mat-mdc-form-field-error {
    color: $error-color !important;
    font-size: 11px !important;
    margin-top: 1px !important;
    position: static !important;
    display: block !important;
    padding: 0 !important;
    font-weight: 400 !important;
    line-height: 1.2 !important;
  }
}

/* Media queries */
@media (max-width: 768px) {
  .form-flex-row {
    flex-direction: column !important;
    gap: 0 !important;
  }
  
  .form-container {
    padding: $spacing-md;
    border-radius: $border-radius-small;
    max-width: 100%;
  }
} 

form {
  width: 100%;
  display: block;
}

/* Campos de formulario personalizados */
.form-control {
  display: block;
  width: 100%;
  height: 48px;
  padding: 12px 16px;
  font-size: $font-size-normal;
  line-height: 1.5;
  color: $text-color-dark;
  background-color: white;
  background-clip: padding-box;
  border: 1px solid rgba($text-color-light, 0.3);
  border-radius: $border-radius-small;
  transition: $transition;
  
  &:focus {
    border-color: $primary-color;
    outline: 0;
    box-shadow: 0 0 0 2px rgba($primary-color, 0.2);
  }
  
  &::placeholder {
    color: rgba($text-color-light, 0.5);
  }
  
  &.is-invalid {
    border-color: $error-color;
    
    &:focus {
      box-shadow: 0 0 0 2px rgba($error-color, 0.2);
    }
  }
}

/* Textareas */
textarea.form-control {
  height: auto;
  min-height: 120px;
  resize: vertical;
}

/* Campos de selección */
select.form-control {
  appearance: none;
  padding-right: 36px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23495057' viewBox='0 0 16 16'%3E%3Cpath d='M8 10.5L3.5 6h9L8 10.5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px 16px;
}

/* Etiquetas de formulario */
.form-label {
  display: block;
  margin-bottom: 8px;
  font-size: $font-size-small;
  font-weight: 500;
  color: $text-color-dark;
}

/* Mensajes de error */
.form-error-message {
  display: block;
  margin-top: 6px;
  font-size: $font-size-xs;
  color: $error-color;
}

/* Mensajes de ayuda */
.form-helper-text {
  display: block;
  margin-top: 6px;
  font-size: $font-size-xs;
  color: $text-color-light;
}

/* Switches */
.form-switch {
  position: relative;
  display: inline-flex;
  align-items: center;
  
  input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    z-index: -1;
    
    &:checked + .switch-slider {
      background-color: $primary-color;
      
      &:before {
        transform: translateX(22px);
      }
    }
    
    &:focus + .switch-slider {
      box-shadow: 0 0 0 2px rgba($primary-color, 0.2);
    }
    
    &:disabled + .switch-slider {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
  
  .switch-slider {
    position: relative;
    display: block;
    width: 48px;
    height: 26px;
    background-color: #e9ecef;
    border-radius: 13px;
    cursor: pointer;
    transition: $transition;
    
    &:before {
      content: "";
      position: absolute;
      top: 3px;
      left: 3px;
      width: 20px;
      height: 20px;
      background-color: white;
      border-radius: 50%;
      transition: $transition;
    }
  }
  
  .switch-label {
    margin-left: 12px;
    font-size: $font-size-small;
    color: $text-color-dark;
  }
} 