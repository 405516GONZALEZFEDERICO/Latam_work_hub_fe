<div class="personal-form-container">
  <div class="header-section">
    <h2 class="form-title">Información personal</h2>
    <p class="form-subtitle">Completa tus datos personales para continuar</p>
  </div>
  
  <div class="form-flex-row" style="justify-content: center; align-items: center; margin-bottom: 16px;">
    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
      <div class="profile-image">
        <img *ngIf="profilePicture" [src]="profilePicture" alt="Profile picture" style="width: 100%; height: 100%; object-fit: cover;">
        <div *ngIf="!profilePicture" style="color: #666; font-size: 13px;">Foto</div>
      </div>
      <button type="button" mat-stroked-button color="primary" (click)="fileInput.click()">
        Cambiar foto
      </button>
    </div>
    <input #fileInput type="file" (change)="onFileSelected($event)" accept="image/*" style="display: none;">
  </div>

  <form [formGroup]="personalDataForm" (ngSubmit)="onSubmit()" style="overflow: visible;">
    <!-- Nombre completo -->
    <div class="form-flex-row">
      <div class="form-flex-col w-100">
        <mat-form-field appearance="outline" class="ios-input w-100 custom-field" [class.field-invalid]="isFieldInvalid('fullName')">
          <mat-label>Nombre completo</mat-label>
          <input matInput formControlName="fullName" placeholder="Ingresa tu nombre completo">
        </mat-form-field>
      </div>
    </div>

    <!-- Email y Fecha de nacimiento -->
    <div class="form-flex-row">
      <div class="form-flex-col">
        <mat-form-field appearance="outline" class="ios-input w-100 custom-field" [class.field-invalid]="isFieldInvalid('email')">
          <mat-label>Correo electrónico</mat-label>
          <input matInput formControlName="email" type="email" placeholder="email@ejemplo.com" [disabled]="true">
        </mat-form-field>
      </div>
      <div class="form-flex-col">
        <mat-form-field appearance="outline" class="ios-input w-100 custom-field" [class.field-invalid]="isFieldInvalid('birthDate')">
          <mat-label>Fecha de nacimiento</mat-label>
          <input matInput [matDatepicker]="birthDatePicker" formControlName="birthDate" placeholder="DD/MM/AAAA">
          <mat-datepicker-toggle matSuffix [for]="birthDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #birthDatePicker></mat-datepicker>
        </mat-form-field>
        
     
      </div>
    </div>
    
    <!-- Tipo de documento y Número de documento -->
    <div class="form-flex-row">
      <div class="form-flex-col">
        <mat-form-field appearance="outline" class="ios-input w-100 custom-field" [class.field-invalid]="isFieldInvalid('documentType')">
          <mat-label>Tipo de documento</mat-label>
          <mat-select formControlName="documentType">
            <mat-option *ngFor="let type of documentTypes" [value]="type.value">
              {{type.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="form-flex-col">
        <mat-form-field appearance="outline" class="ios-input w-100 custom-field" [class.field-invalid]="isFieldInvalid('documentNumber')">
          <mat-label>Número de documento</mat-label>
          <input matInput formControlName="documentNumber" placeholder="Número de documento">
        </mat-form-field>
      </div>
    </div>
    
    <!-- Cargo y Departamento -->
    <div class="form-flex-row">
      <div class="form-flex-col">
        <mat-form-field appearance="outline" class="ios-input w-100 custom-field">
          <mat-label>Cargo</mat-label>
          <input matInput formControlName="jobTitle" placeholder="Ej: Gerente, Desarrollador, Analista">
        </mat-form-field>
      </div>
      <div class="form-flex-col">
        <mat-form-field appearance="outline" class="ios-input w-100 custom-field">
          <mat-label>Departamento</mat-label>
          <input matInput formControlName="department" placeholder="Ej: Marketing, TI, Finanzas">
        </mat-form-field>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="form-actions">
      <button 
        mat-flat-button 
        color="primary"
        class="submit-button"
        type="submit" 
        [disabled]="personalDataForm.invalid || isLoading"
        style="border-radius: 4px !important; overflow: hidden;">
        <ng-container *ngIf="!isLoading" class="button-content">
          <mat-icon class="button-icon">save</mat-icon>
          <span class="button-text">Guardar información</span>
        </ng-container>
        <mat-spinner *ngIf="isLoading" diameter="24"></mat-spinner>
      </button>
    </div>
  </form>
</div>