<div class="container-fluid py-4">
  <!-- Spinner de carga -->
  <div *ngIf="isLoading" class="text-center py-5">
    <mat-spinner class="mx-auto"></mat-spinner>
    <p class="mt-3">Cargando detalles del espacio...</p>
  </div>

  <!-- Contenido cuando se ha cargado el espacio -->
  <div *ngIf="!isLoading && space" class="space-details-container">
    <div class="row mb-4">
      <div class="col-md-8">
        <h1 class="text-2xl font-bold mb-2">{{ space.title }}</h1>
        <p class="text-muted">{{ space.address }}</p>
      </div>
      <div class="col-md-4 d-flex justify-content-end align-items-center">
        <button mat-button color="primary" (click)="goBack()" class="me-2">
          <mat-icon>arrow_back</mat-icon> Volver
        </button>
        <button mat-raised-button color="accent" (click)="editSpace()">
          <mat-icon>edit</mat-icon> Editar
        </button>
      </div>
    </div>

    <div class="row">
      <div class="col-md-8">
        <mat-card>
          <img [src]="getMainImageUrl()" alt="{{ space.title }}" class="img-fluid w-100" style="max-height: 400px; object-fit: cover;">
          
          <mat-card-content class="py-4">
            <mat-tab-group [selectedIndex]="activeTab" (selectedIndexChange)="changeTab($event)">
              <mat-tab label="Detalles">
                <div class="p-3">
                  <h3 class="mb-3">Información del Espacio</h3>
                  
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <h4>Tipo de proveedor</h4>
                      <p>{{ space.providerType }}</p>
                    </div>
                    <div class="col-md-6">
                      <h4>Capacidad</h4>
                      <p>{{ space.capacity }} personas</p>
                    </div>
                  </div>
                  
                  <h3 class="mb-3">Precios</h3>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <div class="card bg-light">
                        <div class="card-body">
                          <h5 class="card-title">Por hora</h5>
                          <p class="card-text h3">{{ formatPrice(space.hourlyPrice) }}</p>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <div class="card bg-light">
                        <div class="card-body">
                          <h5 class="card-title">Por mes</h5>
                          <p class="card-text h3">{{ formatPrice(space.monthlyPrice) }}</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab label="Ubicación">
                <div class="p-3">
                  <h3 class="mb-3">Dirección</h3>
                  <p>{{ space.address }}</p>
                </div>
              </mat-tab>
            </mat-tab-group>
          </mat-card-content>
        </mat-card>
      </div>
      
      <div class="col-md-4">
        <mat-card>
          <mat-card-header>
            <mat-card-title>Contacto del proveedor</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p>Para más información sobre este espacio, puedes contactar directamente con el proveedor.</p>
            <button mat-raised-button color="primary" class="w-100 mt-3">
              <mat-icon>email</mat-icon> Contactar
            </button>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>

  <!-- Mensaje si no hay espacio seleccionado -->
  <div *ngIf="!isLoading && !space" class="text-center py-5">
    <mat-icon class="text-muted" style="font-size: 48px; width: 48px; height: 48px;">error_outline</mat-icon>
    <h3 class="mt-3">Espacio no encontrado</h3>
    <p class="text-muted">El espacio que buscas no existe o ha sido eliminado</p>
    <button mat-raised-button color="primary" class="mt-3" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon> Volver a la lista
    </button>
  </div>
</div>
